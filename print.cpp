#include <iostream>
#include <Windows.h>
#include <thread>
#include <string>

#define ASLR(x)(x - 0x0)

using namespace std;
void console(const char* title);

void main() {
    console("Prrr");

    const auto print = reinterpret_cast <int(__cdecl*)(int,const char*, ...)> (reinterpret_cast <std::uintptr_t> (GetModuleHandle(nullptr)) + ASLR(0xC34AB0));

    char typ;
    string pr;
    string k;
    bool t = true;

    cout << "*************************START**********************\n";
    cout << "Types are, normal = 0, info = 1, warn = 2, error = 3\n";
    do {
        cout << "Text: ";
        cin >> pr;
        const char* v = pr.c_str();
    jum:
        cout << "Type: ";
        cin >> typ;
        switch (typ) {
        case '0':
            print(0, v);
            break;
        case '1':
            print(1, v);
            break;
        case '2':
            print(2, v);
            break;
        case '3':
            print(3, v);
            break;
        default:
            cout << (string)"Please Enter A Valid Type Number\n";
            Sleep(1000);
            goto jum;
        }

    } while (t);

}



void console(const char* title) {
    DWORD old;
    VirtualProtect(reinterpret_cast <PVOID> (&FreeConsole), 1, PAGE_EXECUTE_READWRITE, &old);
    *reinterpret_cast <std::uint8_t*> (&FreeConsole) = 0xC3;
    VirtualProtect(&FreeConsole, 1, old, &old);
    AllocConsole();
    SetConsoleTitleA(title);
    FILE* file_stream;
    freopen_s(&file_stream, "CONOUT$", "w", stdout);
    freopen_s(&file_stream, "CONOUT$", "w", stderr);
    freopen_s(&file_stream, "CONIN$", "r", stdin);
}

BOOL __stdcall DllMain(HINSTANCE Dll, DWORD Reason, LPVOID Reserved) {
    if (Reason == DLL_PROCESS_ATTACH) {
        CreateThread(0, 0, (LPTHREAD_START_ROUTINE)main, 0, 0, 0);
    }
    return TRUE;
}
